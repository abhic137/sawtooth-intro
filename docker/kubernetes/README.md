# To use the single node kubernetes deployment use the file
Use the file ```docker/kubernetes/sawtooth-kubernetes-default.yaml```
Install the kubectl command:
```
 curl -Lo kubectl https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl \
&& chmod +x kubectl && sudo cp kubectl /usr/local/bin/ && rm kubectl
```

Install minikube :
```
 curl -Lo minikube https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 \
&& chmod +x minikube && sudo cp minikube /usr/local/bin/ && rm minikube
```
start minikube:
```
minikube start
```
check pods:
```
kubectl get pods
```
to start the sawtooth you have to be present in this directory
```
kubectl apply -f sawtooth-kubernetes-default.yaml
```
to start minikube dsahboard:
```
minikube dashboard
```
Connect to the Kubernetes Shell Container:
```
kubectl exec -it $(kubectl get pods | awk '/sawtooth-0/{print $1}') --container sawtooth-shell -- bash
```
Confirm Connectivity to the REST API (for Kubernetes)
```

root@sawtooth-0# curl http://localhost:8008/blocks
```
Test Basic Sawtooth Functionality:
Display the list of blocks on the Sawtooth blockchain.
```
root@sawtooth-0# sawtooth block list
```
display more information about the block.
```
root@sawtooth-0# sawtooth block show {BLOCK-ID}
```
Use Sawtooth Commands as a Client:
Use intkey create_batch to prepare batches of transactions that set a few keys to random values, then randomly increment and decrement those values. These batches are saved locally in the file batches.intkey
```
root@sawtooth-0# intkey create_batch --count 10 --key-count 5
```
Use intkey load to submit the batches to the validator, which commits these batches of transactions as new blocks on the blockchain.
```
root@sawtooth-0# intkey load -f batches.intkey
```
```OR``` YOU CAN USE BATCH SUBMIT
create a batch of transactions:
```
root@sawtooth-0# intkey create_batch --count 6 --key-count 3
```
Submit the batch file with sawtooth batch submit:
```
root@sawtooth-0# sawtooth batch submit -f batches.intkey
```
Viewing Blockchain and Block Data with sawtooth block:
Use sawtooth block list again to display the list of blocks stored in state:
```
root@sawtooth-0# sawtooth block list
```
From the output generated by sawtooth block list, copy the ID of a block you want to view:
```
root@sawtooth-0# sawtooth block show 327aede38ab395bbdba711911414a9a68166b5378af4bdc15206089a2adf0cb62448f9fc4d749f0c8677849f7fe19c734f05f86687201666e8899437f903102d
```
Viewing State Data with sawtooth state:
```
root@sawtooth-0# sawtooth state list --format csv
```
Use sawtooth state show to view state data at a specific address (a node in the Merkle-Radix database). :
```
root@sawtooth-0# sawtooth state show {STATE_ADDRESS}
```
 Verify the Sawtooth Components

To check whether a Sawtooth component is running, connect to the component's container and run the ps command.

    Use the kubectl exec command from your computer to connect to a Sawtooth container. On the Kubernetes dashboard, the Pods page displays the container names.

    For example, connect to the validator container with the following command:

    $ kubectl exec -it $(kubectl get pods | awk '/sawtooth-0/{print $1}') --container sawtooth-validator -- bash

    After connecting to the container, you can use ps to verify that the Sawtooth component is running.

    root@sawtooth-0# ps -A fw
Examine Sawtooth Logs

The Sawtooth log files are available on the Kubernetes dashboard.

        From the dashboard's overview page, click on the Sawtooth pod name.

        On the Sawtooth pod page, click on the LOGS button.

        On Logs page, select the Sawtooth component. For example, to view the validator log messages, select sawtooth-validator.

        The following extract shows the genesis block being processed and committed to the blockchain.

you can connect to the validator container and display the contents of /var/log/sawtooth:
```
$ kubectl exec -it $(kubectl get pods | awk '/sawtooth-0/{print $1}') --container sawtooth-validator -- bash
root@sawtooth-0# ls -1 /var/log/sawtooth
validator-debug.log
validator-error.log

 ```
 Stop the Sawtooth Kubernetes Cluster

Use the following commands to stop and reset the Sawtooth environment.

    Important

    Any work done in this environment will be lost once you delete the Sawtooth cluster. To keep your work, you would need to take additional steps, such as defining volume storage. See the Kubernetes documentation for more information.

    Log out of all Sawtooth containers.

    Stop Sawtooth and delete the pod. Run the following command from the same directory where you saved the configuration file.

    $ kubectl delete -f sawtooth-kubernetes-default.yaml
    deployment.extensions "sawtooth-0" deleted
    service "sawtooth-0" deleted

    Stop the Minikube cluster.

    $ minikube stop
    Stopping local Kubernetes cluster...
    Machine stopped.

    Delete the Minikube cluster, VM, and all associated files.

    $ minikube delete
    Deleting local Kubernetes cluster...
    Machine deleted.




# To use the multi node (5 nodes) deployment use the file
## for poet
```
docker/kubernetes/sawtooth-kubernetes-default-poet.yaml
```
## for pbft
```
docker/kubernetes/sawtooth-kubernetes-default-pbft.yaml
```
